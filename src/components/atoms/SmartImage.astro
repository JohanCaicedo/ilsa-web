---
import { Image } from "astro:assets";
import { cn } from "../../lib/utils";

interface Props {
    src: string;
    alt: string;
    width?: number;
    height?: number;
    class?: string;
    priority?: boolean;
}

const {
    src,
    alt,
    class: className,
    width = 800,
    height = 600,
    priority = false,
    ...rest
} = Astro.props;
---

<Image
    src={src}
    alt={alt}
    width={width}
    height={height}
    loading={priority ? "eager" : "lazy"}
    decoding="async"
    class={cn(
        "transition-opacity duration-700 ease-in-out opacity-0 data-[loaded=true]:opacity-100",
        "translate-z-0 backface-hidden", // Safari Perf
        className,
    )}
    onload="this.setAttribute('data-loaded', 'true')"
    {...rest}
/>
