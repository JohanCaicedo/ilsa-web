---
import { cn } from "../../lib/utils";
import GradientText from "../atoms/GradientText.astro";
import NewsCard from "../molecules/NewsCard.astro";
import type { PostNode } from "../../lib/wp";

interface Props {
    posts: PostNode[];
    class?: string;
}

const { posts, class: className } = Astro.props;
---

<section class={cn("py-6 md:py-12 relative", className)}>
    <!-- Decorative Background for Glass Effect -->
    <div
        class="absolute inset-0 pointer-events-none select-none overflow-hidden -z-10 opacity-40"
    >
        <div
            class="absolute top-[20%] left-[-10%] w-[600px] h-[600px] bg-[#4E7CCE]/5 rounded-full blur-[120px]"
        >
        </div>
        <div
            class="absolute bottom-[10%] right-[-10%] w-[500px] h-[500px] bg-[#5E3B69]/5 rounded-full blur-[100px]"
        >
        </div>
    </div>
    <div class="max-w-[1400px] mx-auto px-6 text-center">
        <GradientText
            text="Actualidad ILSA"
            size="text-3xl md:text-5xl"
            weight="font-semibold"
            from="#4E7CCE"
            to="#1e3a8a"
            class="mb-4 block w-fit mx-auto text-center"
        />
        <p
            class="text-sm text-slate-500 text-center mt-2 max-w-md mx-auto text-pretty"
        >
            Mantente informado con las últimas noticias, análisis y
            actualizaciones de nuestra gestión.
        </p>

        <div
            class="flex flex-nowrap md:flex-wrap items-stretch justify-start md:justify-center gap-4 md:gap-12 mt-10 md:mt-16 overflow-x-auto snap-x snap-mandatory px-6 md:px-0 -mx-6 md:mx-0 pb-8 md:pb-0 scrollbar-hide focus-visible:ring-2 focus-visible:ring-[#4E7CCE] focus-visible:outline-none rounded-xl"
            tabindex="0"
            aria-label="Carrusel de noticias recientes"
            role="region"
        >
            {
                posts.map((post) => (
                    <NewsCard
                        title={post.title}
                        excerpt={post.excerpt}
                        image={
                            post.featuredImage?.node?.sourceUrl ||
                            "/placeholder.jpg"
                        }
                        link={post.uri}
                        className="snap-center shrink-0 w-[85vw] md:w-auto"
                    />
                ))
            }
        </div>

        <style>
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
        </style>
    </div>
</section>
