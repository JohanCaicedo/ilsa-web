---
import Layout from "../layouts/Layout.astro";
import GradientText from "../components/atoms/GradientText.astro";
import LiquidContainer from "../components/experimental/LiquidContainer.astro";

export const prerender = true;
---

<Layout title="Apoya a ILSA - Donaciones" width="narrow">
    <div class="relative py-16 sm:py-24 px-4">
        <LiquidContainer frosted={true} class="max-w-3xl mx-auto rounded-3xl">
            <div class="p-10 md:p-16">
                <!-- Header -->
                <div class="mb-12">
                    <GradientText
                        text="Tu apoyo transforma realidades"
                        size="text-4xl md:text-5xl text-center"
                        weight="font-black"
                        from="var(--ilsa-blue)"
                        to="#9333ea"
                        class="justify-center mb-6 block w-fit mx-auto pb-2"
                    />
                    <p
                        class="text-lg text-slate-700 text-balance leading-relaxed max-w-2xl mx-auto"
                    >
                        Contribuye a la construcción de un derecho alternativo y
                        una sociedad más justa en América Latina. Cada donación
                        financia nuestras investigaciones y actividades
                        académicas.
                    </p>
                </div>

                <!-- Ko-fi Button Container -->
                <div class="max-w-xl mx-auto">
                    <div
                        class="glass-donation-box rounded-3xl p-8 border border-white/30 bg-white/40 backdrop-blur-xl shadow-xl"
                    >
                        <div class="text-center mb-6">
                            <h3
                                class="text-xl font-bold text-slate-800 mb-2 uppercase tracking-wider text-center"
                            >
                                Apóyanos con Ko-fi
                            </h3>
                            <p class="text-sm text-slate-600">
                                Elige el monto que desees contribuir
                            </p>
                        </div>

                        <!-- Ko-fi Button -->
                        <button
                            id="kofi-trigger"
                            class="w-full py-5 bg-gradient-to-r from-[#4a7dbf] to-[#375a9e] hover:from-[#375a9e] hover:to-[#2d4a7f] text-white font-bold rounded-2xl shadow-xl shadow-[#4a7dbf]/20 hover:shadow-[#4a7dbf]/40 hover:-translate-y-1 transition-all flex items-center justify-center gap-3 group cursor-pointer"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="group-hover:scale-110 transition-transform"
                            >
                                <path
                                    d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"
                                ></path>
                            </svg>
                            Hacer una donación
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="group-hover:translate-x-1 transition-transform"
                            >
                                <path d="M5 12h14"></path>
                                <path d="m12 5 7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- Info Section -->
                    <div class="mt-10 space-y-4">
                        <div
                            class="flex items-start gap-3 p-4 rounded-2xl bg-white/30 border border-white/20 backdrop-blur-sm"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="text-[#4a7dbf] shrink-0 mt-0.5"
                            >
                                <path
                                    d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"
                                ></path>
                            </svg>
                            <div>
                                <p class="font-semibold text-slate-800 mb-1">
                                    Transacción segura
                                </p>
                                <p class="text-sm text-slate-600">
                                    Ko-fi utiliza sistemas de pago seguros y
                                    confiables para proteger tu información.
                                </p>
                            </div>
                        </div>

                        <div
                            class="flex items-start gap-3 p-4 rounded-2xl bg-white/30 border border-white/20 backdrop-blur-sm"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="text-[#4a7dbf] shrink-0 mt-0.5"
                            >
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 16v-4"></path>
                                <path d="M12 8h.01"></path>
                            </svg>
                            <div>
                                <p class="font-semibold text-slate-800 mb-1">
                                    Flexible y transparente
                                </p>
                                <p class="text-sm text-slate-600">
                                    Puedes elegir el monto que desees y realizar
                                    donaciones únicas o recurrentes.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer Badge -->
                    <div
                        class="mt-10 pt-8 border-t border-slate-300/30 flex justify-center gap-2 opacity-70"
                    >
                        <span
                            class="text-xs font-medium uppercase tracking-widest text-slate-500 flex items-center gap-2"
                        >
                            <svg
                                class="w-4 h-4"
                                fill="currentColor"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"
                                ></path>
                            </svg>
                            Powered by Ko-fi
                        </span>
                    </div>
                </div>
            </div>
        </LiquidContainer>
    </div>
</Layout>

<script is:inline>
    // Load Ko-fi widget script
    if (typeof kofiWidgetOverlay === "undefined") {
        const script = document.createElement("script");
        script.src = "https://storage.ko-fi.com/cdn/scripts/overlay-widget.js";
        script.async = true;
        document.head.appendChild(script);

        script.onload = () => {
            kofiWidgetOverlay.draw("ilsacolombia", {
                type: "floating-chat",
                "floating-chat.donateButton.text": "Apoyar",
                "floating-chat.donateButton.background-color": "#4a7dbf",
                "floating-chat.donateButton.text-color": "#ffffff",
            });
        };
    }

    // Trigger Ko-fi widget on button click
    document.getElementById("kofi-trigger")?.addEventListener("click", () => {
        if (typeof kofiWidgetOverlay !== "undefined") {
            // Simulate clicking the Ko-fi floating button
            const kofiButton = document.querySelector('a[href*="ko-fi.com"]');
            if (kofiButton) {
                kofiButton.click();
            }
        } else {
            // Fallback: direct link
            window.open("https://ko-fi.com/ilsacolombia", "_blank");
        }
    });
</script>

<style>
    .glass-donation-box {
        background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.5) 0%,
            rgba(255, 255, 255, 0.3) 100%
        );
        box-shadow:
            0 8px 32px 0 rgba(74, 125, 191, 0.1),
            inset 0 1px 0 0 rgba(255, 255, 255, 0.5);
    }
</style>
